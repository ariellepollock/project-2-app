<%- include('../partials/header') %>

<style>
    /* Custom styles for mobile responsiveness */
    @media (max-width: 576px) {
        .mList {
            font-size: 0.8rem; /* Adjust font size for smaller screens */
        }
        .btn-group, .btn {
            font-size: 0.8rem; /* Adjust button font sizes for better readability */
            padding: 0.25rem 0.5rem; /* Adjust padding for smaller buttons */
        }
        .LHeader {
            font-size: 1.5rem; /* Adjust heading font size for mobile */
        }
        .addMovies, .form-control, button {
            font-size: 0.8rem; /* Adjust font size for form elements and messages */
        }
    }
</style>

<% if (watchlist) { %>
    <h2 class="LHeader text-center"><%= watchlist.title %></h2>

    <% if (watchlist.movies && watchlist.movies.length > 0) { %>
        <div class="container space">
            <% watchlist.movies.forEach(movie => { %>
                <div class="btn-group" role="group" aria-label="Basic checkbox button group">
                    <div class="btn-group" role="group">
                        <select type="select" class="btn mList" data-bs-toggle="dropdown" aria-expanded="false">
                            <option>⚪</option>
                            <option>🟠</option>
                            <option>🟣</option>
                            <option>👀</option>
                            <option>❤️</option>
                            <option>👍</option>
                            <option>👎</option>
                        </select>
                    </div>
                    <input type="checkbox" class="btn-check" id="btncheck<%= movie._id %>" autocomplete="off">
                    <label class="btn btn-outline-primary d-flex align-items-center mList" for="btncheck<%= movie._id %>">❌</label>
                    <a href="/movies/<%= movie.movieId %>" class="btn btn-outline-primary mList">
                        <%= movie.title %>
                    </a>
                </div>
                <br><br>
            <% }) %>
        </div>
    <% } else { %>
        <p class="addMovies text-center">Start adding movies.</p>
    <% } %>

    <% if (signedIn && username && userId && watchlist.owner.equals(userId)) { %>
        <div class="d-flex flex-column flex-sm-row justify-content-center align-items-center mb-5 mt-3 space">
            <form method="POST" action="/watchlists/update/<%= watchlist._id %>" class="d-flex mb-2 mb-sm-0">
                <input type="text" class="form-control me-2" name="name" placeholder="Watchlist Name" required>
                <button type="submit" class="btn btn-outline-warning">Update</button>
            </form>
            <form method="POST" action="/watchlists/delete/<%= watchlist._id %>">
                <button type="submit" class="btn btn-outline-danger ms-sm-2">Delete</button>
            </form>
        </div>
    <% } %>
<% } else { %>
    <p class="text-center">Watchlist not found, so sorry.</p>
<% } %>

<%- include('../partials/footer') %>
